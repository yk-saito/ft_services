server {
	listen 80		default_server;
	listen [::]:80 	default_server;

	server_name localhost;
	return 301	https://$host$request_uri;
}

# SSL configuration
server {
	listen 443		ssl;
	listen [::]:443	ssl;

	server_name _;

	root /var/www;
	index index.html index.php;

	ssl_certificate		/etc/ssl/certs/services.crt;
	ssl_certificate_key	/etc/ssl/private/services.key;

	location /phpmyadmin/ {
		proxy_pass https://phpmyadmin-svc:5000/;
		proxy_redirect / /phpmyadmin/;
		proxy_set_header Host $host;
	}

	location /wordpress {
		return 307 https://$host:5050/;
	}

	location / {
		try_files $uri $uri/ =404;
	}
}